{% extends 'base.html' %}
{% block contenido %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/estilo.css' %}">
{% if noticia %}		
    {% for p in noticia %}
    {% if user.is_superuser %}<a target="_blank" class="" href="">Administrar noticia</a>{%endif%}
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Categorías
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <ul>
                    {%for i in categoria %}
                    <li><a class="dropdown-item" target="_blank" href="{% url 'apps.noticia:listarPorCategoria' nombre %}">{{i.nombre}}</a></li>
                    {% endfor %}
                </ul>
        </ul> 
    </li>
</ul>

    <div class="container">
        <h1 style="text-align: center;">{{p.titulo}}</h1>
        <h3 style="text-align: center;">{{p.subtitulo}}</h3>
        <p style="text-align: center;">{{p.fecha}}</p>
        <!--*******Imagen*******-->
        <p style="margin-left: 30%;">{% if p.imagen %}<img src="{{ p.imagen.url }}"  width="550" height="400">
           {% else %}<img src="noticia/default.png"  width="550" height="400">
           {% endif %}</p>
        {% if user.is_authenticated %}<!--Solo si esta logueado podrá ver el texto, comentar y entrar a la noticia-->
        <p style="text-align: center;">{{p.texto|safe}}</p>
        <!--*******Comentarios*******-->
        <div class="comment">
            Comentarios: {{p.comment.count}}
            <strong>{{ p.comment }}</strong>
            <div class="date">{{ p.comment.publish }}</div>
            <p>{{ p.comment.texto|linebreaks }}</p>
        </div>

        <div data-gb-custom-block data-tag="empty">
            <p>No hay comentarios aún :)</p>
        </div>
        <style>
            .comment{
                margin: 20px 0px 20px 20px;
            }
        </style>
        {% else %}
        <p style="text-align: center;">Para ver las noticias completas, por favor registrese o inicie sesión :)</p> 
        {% endif %}
    {% endfor %}
{% endif %}
</div>
{% endblock %}